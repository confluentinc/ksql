<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_265) on Fri Oct 01 11:59:27 CDT 2021 -->
<title>CommandQueue</title>
<meta name="date" content="2021-10-01">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CommandQueue";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandIdAssigner.html" title="class in io.confluent.ksql.rest.server.computation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandRunner.html" title="class in io.confluent.ksql.rest.server.computation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?io/confluent/ksql/rest/server/computation/CommandQueue.html" target="_top">Frames</a></li>
<li><a href="CommandQueue.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.confluent.ksql.rest.server.computation</div>
<h2 title="Interface CommandQueue" class="title">Interface CommandQueue</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd>java.lang.AutoCloseable, java.io.Closeable</dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandStore.html" title="class in io.confluent.ksql.rest.server.computation">CommandStore</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">CommandQueue</span>
extends java.io.Closeable</pre>
<div class="block">Represents a queue of <a href="../../../../../../io/confluent/ksql/rest/server/computation/Command.html" title="class in io.confluent.ksql.rest.server.computation"><code>Command</code></a>s that must be distributed to all
 KSQL servers for execution. This queue should be persistent to failure
 of individual servers, and servers must be able to recover (i.e. build
 their meta store state) using <i>exclusively</i> data stored within.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#abortCommand-io.confluent.ksql.rest.entity.CommandId-">abortCommand</a></span>(<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>&nbsp;commandId)</code>
<div class="block">If a command created with enqueueCommand has had errors and the transaction has failed or been
 aborted, this should be called to ensure state is cleaned up.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#close--">close</a></span>()</code>
<div class="block">Closes the queue so that no more reads or writes will be accepted.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#corruptionDetected--">corruptionDetected</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>org.apache.kafka.clients.producer.Producer&lt;<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>,<a href="../../../../../../io/confluent/ksql/rest/server/computation/Command.html" title="class in io.confluent.ksql.rest.server.computation">Command</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#createTransactionalProducer--">createTransactionalProducer</a></span>()</code>
<div class="block">Creates a transactional producer for producing to the command topic.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../../io/confluent/ksql/rest/server/computation/QueuedCommandStatus.html" title="class in io.confluent.ksql.rest.server.computation">QueuedCommandStatus</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#enqueueCommand-io.confluent.ksql.rest.entity.CommandId-io.confluent.ksql.rest.server.computation.Command-org.apache.kafka.clients.producer.Producer-">enqueueCommand</a></span>(<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>&nbsp;commandId,
              <a href="../../../../../../io/confluent/ksql/rest/server/computation/Command.html" title="class in io.confluent.ksql.rest.server.computation">Command</a>&nbsp;command,
              org.apache.kafka.clients.producer.Producer&lt;<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>,<a href="../../../../../../io/confluent/ksql/rest/server/computation/Command.html" title="class in io.confluent.ksql.rest.server.computation">Command</a>&gt;&nbsp;transactionalProducer)</code>
<div class="block">Enqueues a command onto the command topic.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#ensureConsumedPast-long-java.time.Duration-">ensureConsumedPast</a></span>(long&nbsp;seqNum,
                  java.time.Duration&nbsp;timeout)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../../io/confluent/ksql/rest/server/computation/QueuedCommand.html" title="class in io.confluent.ksql.rest.server.computation">QueuedCommand</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#getNewCommands-java.time.Duration-">getNewCommands</a></span>(java.time.Duration&nbsp;timeout)</code>
<div class="block">Polls the Queue for any commands that have been enqueued since the last
 invocation to this method.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../../io/confluent/ksql/rest/server/computation/QueuedCommand.html" title="class in io.confluent.ksql.rest.server.computation">QueuedCommand</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#getRestoreCommands--">getRestoreCommands</a></span>()</code>
<div class="block">Seeks to the earliest point in history available in the command queue
 and returns all commands between then and the end of the queue.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#isEmpty--">isEmpty</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#waitForCommandConsumer--">waitForCommandConsumer</a></span>()</code>
<div class="block">Blocks until the command topic consumer has processed all records up to
 the current offset when this method is called.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#wakeup--">wakeup</a></span>()</code>
<div class="block">Cause any blocked <a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#getNewCommands-java.time.Duration-"><code>getNewCommands(Duration)</code></a> calls to return early.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="enqueueCommand-io.confluent.ksql.rest.entity.CommandId-io.confluent.ksql.rest.server.computation.Command-org.apache.kafka.clients.producer.Producer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enqueueCommand</h4>
<pre><a href="../../../../../../io/confluent/ksql/rest/server/computation/QueuedCommandStatus.html" title="class in io.confluent.ksql.rest.server.computation">QueuedCommandStatus</a>&nbsp;enqueueCommand(<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>&nbsp;commandId,
                                   <a href="../../../../../../io/confluent/ksql/rest/server/computation/Command.html" title="class in io.confluent.ksql.rest.server.computation">Command</a>&nbsp;command,
                                   org.apache.kafka.clients.producer.Producer&lt;<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>,<a href="../../../../../../io/confluent/ksql/rest/server/computation/Command.html" title="class in io.confluent.ksql.rest.server.computation">Command</a>&gt;&nbsp;transactionalProducer)</pre>
<div class="block">Enqueues a command onto the command topic. After this method returns,
 it is guaranteed that the command has been persisted, without regard
 for the <a href="../../../../../../io/confluent/ksql/rest/entity/CommandStatus.html" title="class in io.confluent.ksql.rest.entity"><code>CommandStatus</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>commandId</code> - The id of the command to be distributed</dd>
<dd><code>command</code> - The command to be distributed</dd>
<dd><code>transactionalProducer</code> - The transactional producer used to for enqueue the command</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an asynchronous tracker that can be used to determine the current
         state of the command</dd>
</dl>
</li>
</ul>
<a name="getNewCommands-java.time.Duration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewCommands</h4>
<pre>java.util.List&lt;<a href="../../../../../../io/confluent/ksql/rest/server/computation/QueuedCommand.html" title="class in io.confluent.ksql.rest.server.computation">QueuedCommand</a>&gt;&nbsp;getNewCommands(java.time.Duration&nbsp;timeout)</pre>
<div class="block">Polls the Queue for any commands that have been enqueued since the last
 invocation to this method.

 <p>The method blocks until either there is data to return or the
 supplied <code>timeout</code> expires.

 <p>If between invocations to this method, <a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#getRestoreCommands--"><code>getRestoreCommands()</code></a> is
 invoked, this command will begin where the results of that call ended.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - the max time to wait for new commands.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of commands that have been enqueued since the last call</dd>
</dl>
</li>
</ul>
<a name="getRestoreCommands--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRestoreCommands</h4>
<pre>java.util.List&lt;<a href="../../../../../../io/confluent/ksql/rest/server/computation/QueuedCommand.html" title="class in io.confluent.ksql.rest.server.computation">QueuedCommand</a>&gt;&nbsp;getRestoreCommands()</pre>
<div class="block">Seeks to the earliest point in history available in the command queue
 and returns all commands between then and the end of the queue.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entire command list history</dd>
</dl>
</li>
</ul>
<a name="ensureConsumedPast-long-java.time.Duration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureConsumedPast</h4>
<pre>void&nbsp;ensureConsumedPast(long&nbsp;seqNum,
                        java.time.Duration&nbsp;timeout)
                 throws java.lang.InterruptedException,
                        java.util.concurrent.TimeoutException</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>seqNum</code> - the required minimum sequence number to wait for</dd>
<dd><code>timeout</code> - throws <code>TimeoutException</code> if it takes longer that
                <code>timeout</code> to get to <code>seqNum</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
<dd><code>java.util.concurrent.TimeoutException</code></dd>
</dl>
</li>
</ul>
<a name="createTransactionalProducer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTransactionalProducer</h4>
<pre>org.apache.kafka.clients.producer.Producer&lt;<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>,<a href="../../../../../../io/confluent/ksql/rest/server/computation/Command.html" title="class in io.confluent.ksql.rest.server.computation">Command</a>&gt;&nbsp;createTransactionalProducer()</pre>
<div class="block">Creates a transactional producer for producing to the command topic.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a TransactionalProducer</dd>
</dl>
</li>
</ul>
<a name="abortCommand-io.confluent.ksql.rest.entity.CommandId-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortCommand</h4>
<pre>void&nbsp;abortCommand(<a href="../../../../../../io/confluent/ksql/rest/entity/CommandId.html" title="class in io.confluent.ksql.rest.entity">CommandId</a>&nbsp;commandId)</pre>
<div class="block">If a command created with enqueueCommand has had errors and the transaction has failed or been
 aborted, this should be called to ensure state is cleaned up.</div>
</li>
</ul>
<a name="waitForCommandConsumer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForCommandConsumer</h4>
<pre>void&nbsp;waitForCommandConsumer()</pre>
<div class="block">Blocks until the command topic consumer has processed all records up to
 the current offset when this method is called.</div>
</li>
</ul>
<a name="isEmpty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEmpty</h4>
<pre>boolean&nbsp;isEmpty()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>whether or not there are any enqueued commands</dd>
</dl>
</li>
</ul>
<a name="corruptionDetected--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>corruptionDetected</h4>
<pre>boolean&nbsp;corruptionDetected()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>whether or not corruption is detected in the queue</dd>
</dl>
</li>
</ul>
<a name="wakeup--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wakeup</h4>
<pre>void&nbsp;wakeup()</pre>
<div class="block">Cause any blocked <a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#getNewCommands-java.time.Duration-"><code>getNewCommands(Duration)</code></a> calls to return early.

 <p>Useful when wanting to <a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandQueue.html#close--"><code>close()</code></a> the queue in a timely fashion.</div>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>void&nbsp;close()</pre>
<div class="block">Closes the queue so that no more reads or writes will be accepted.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandIdAssigner.html" title="class in io.confluent.ksql.rest.server.computation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../io/confluent/ksql/rest/server/computation/CommandRunner.html" title="class in io.confluent.ksql.rest.server.computation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?io/confluent/ksql/rest/server/computation/CommandQueue.html" target="_top">Frames</a></li>
<li><a href="CommandQueue.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
